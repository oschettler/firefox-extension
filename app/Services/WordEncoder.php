<?php

namespace App\Services;

class WordEncoder {
    static private $dict = [
        "Abend", "Abzug", "Adel", "Adler", "Affe", "Agent", "Ahorn", "Akt", "Aktie", "Aktion", "Akzent", "Album", "Alien", "Altar", "Alter", "Ameise", "Anfang", "Angabe", "Angel", "Angst", "Anker", "Anruf", "Ansatz", "Antrag", "Anwalt", "Anzahl", "Anzug", "Apfel", "Arbeit", "Ära", "Ärger", "Arm", "Armee", "Armut", "Aroma", "Art", "Arten", "Arzt", "Asche", "Aspekt", "Ass", "Ast", "Atem", "Aufzug", "Auge", "Auto", "Autor", "Axt", "Baby", "Bach", "Bad", "Balkon", "Ball", "Ballon", "Banane", "Band", "Bank", "Banner", "Bar", "Baron", "Bart", "Basis", "Bauch", "Bauer", "Baum", "Beat", "Becher", "Becken", "Beere", "Befehl", "Bein", "Berg", "Beruf", "Besen", "Besitz", "Besuch", "Beton", "Bett", "Beute", "Beutel", "Beweis", "Bibel", "Biene", "Bier", "Biest", "Bild", "Birke", "Biss", "Bit", "Blase", "Blatt", "Blaue", "Blick", "Blitz", "Block", "Bluff", "Blume", "Bluse", "Blut", "Blüte", "Boden", "Bogen", "Bohne", "Bohrer", "Bolzen", "Bombe", "Boom", "Boot", "Bote", "Boxer", "Braten", "Braut", "Bremse", "Brett", "Brief", "Brille", "Brise", "Bronze", "Brot", "Bruder", "Brust", "Buch", "Bucht", "Budget", "Bulle", "Bums", "Bunker", "Burg", "Burger", "Bus", "Busch", "Busen", "Butler", "Butter", "Bär", "Böe", "Böse", "Bühne", "Büro", "Camp", "Campus", "Casino", "Chance", "Chaos", "Charm", "Chef", "Chemie", "Chili", "China", "Chip", "Chor", "Clan", "Clown", "Club", "Code", "Cousin", "Cowboy", "Creme", "Dach", "Dame", "Damm", "Dank", "Datei", "Daten", "Datum", "Daumen", "Deck", "Decke", "Deckel", "Dekan", "Delfin", "Denken", "Design", "Detail", "Diakon", "Dialog", "Dieb", "Diener", "Diner", "Ding", "Diplom", "Diät", "Dock", "Doktor", "Dolch", "Donner", "Dorf", "Dorn", "Dose", "Dosis", "Drache", "Drake", "Drama", "Drang", "Dreck", "Drift", "Druck", "Duft", "Dunkel", "Dusche", "Dämon", "Düne", "Ebene", "Echo", "Ecke", "Efeu", "Effekt", "Ego", "Ehe", "Ehre", "Ei", "Eiche", "Eile", "Eimer", "Eine", "Eis", "Ekel", "Elend", "Elf", "Email", "Ende", "Engel", "Enkel", "Ente", "Erbe", "Erbse", "Erde", "Erfolg", "Ernte", "Esel", "Essen", "Essenz", "Etagen", "Eule", "Fabrik", "Fach", "Fackel", "Faden", "Fahrer", "Fahrt", "Faktor", "Fall", "Falle", "Falte", "Falten", "Fan", "Fang", "Farbe", "Faust", "Fazit", "Feder", "Fee", "Fehl", "Fehler", "Feind", "Feld", "Fell", "Fels", "Ferse", "Fest", "Fett", "Feuer", "Fieber", "Figur", "Film", "Finger", "Firma", "Fisch", "Flagge", "Flamme", "Fleck", "Fliese", "Flocke", "Flora", "Flotte", "Floß", "Fluch", "Flucht", "Flug", "Flur", "Fluss", "Flöte", "Fokus", "Folter", "Fond", "Ford", "Form", "Foto", "Foyer", "Fracht", "Frage", "Frau", "Freak", "Fremde", "Freude", "Freund", "Front", "Frosch", "Frost", "Fuchs", "Fund", "Funke", "Futter", "Fuß", "Fähre", "Gabel", "Gang", "Gans", "Ganze", "Garage", "Garten", "Gas", "Gasse", "Gast", "Gebet", "Gebiet", "Geburt", "Geduld", "Gefahr", "Gegner", "Gehalt", "Gehen", "Gehirn", "Gehweg", "Geige", "Geisel", "Geist", "Gelbe", "Geld", "Gen", "Genie", "Geruch", "Gerät", "Gesang", "Gesetz", "Geste", "Gewalt", "Gewebe", "Gewehr", "Gewinn", "Gewirr", "Gibt", "Gift", "Gigant", "Gin", "Glas", "Glaube", "Glied", "Globus", "Glocke", "Glück", "Gnade", "Gold", "Golf", "Gott", "Grab", "Graben", "Grad", "Graf", "Granit", "Gras", "Grat", "Graue", "Grenze", "Griff", "Grill", "Grille", "Groll", "Grube", "Grund", "Gruppe", "Grün", "Gummi", "Gunst", "Gurt", "Gute", "Güte", "Haar", "Hafen", "Hai", "Hain", "Haken", "Halle", "Hals", "Halt", "Halter", "Hammer", "Hand", "Handel", "Hang", "Hank", "Hase", "Hass", "Haube", "Haupt", "Haus", "Haut", "Haven", "Heap", "Hecht", "Heck", "Hecke", "Held", "Helm", "Hemd", "Henne", "Herbst", "Herd", "Herde", "Herr", "Herz", "Herzog", "Heu", "Heulen", "Hexe", "Hilfe", "Himmel", "Hinken", "Hirte", "Hitze", "Hof", "Holz", "Honig", "Horn", "Horror", "Hose", "Hosen", "Hotel", "Hub", "Huf", "Huhn", "Humor", "Hund", "Hunger", "Husten", "Hut", "Höhe", "Höhle", "Hölle", "Hüfte", "Hügel", "Hülse", "Hütte", "Ich", "Idee", "Idiot", "Impuls", "Inder", "Index", "Ingwer", "Inhalt", "Innere", "Insekt", "Insel", "Iris", "Ironie", "Jacke", "Jagd", "Jahr", "Jasmin", "Jazz", "Jeans", "Jeep", "Joint", "Jugend", "Junge", "Jury", "Justiz", "Juwel", "Jäger", "Kabel", "Kaffee", "Kaiser", "Kalb", "Kalk", "Kamel", "Kamera", "Kamin", "Kamm", "Kammer", "Kampf", "Kanal", "Kanone", "Kanu", "Kappe", "Karte", "Karton", "Katze", "Kauf", "Keks", "Keller", "Kerl", "Kern", "Kerze", "Kette", "Kick", "Kiefer", "Kies", "Kind", "Kinn", "Kirche", "Kissen", "Kiste", "Kit", "Klang", "Klappe", "Klasse", "Klaue", "Kleid", "Klick", "Klient", "Klinge", "Klinik", "Klippe", "Klopf", "Kluft", "Knabe", "Knall", "Knie", "Knopf", "Knospe", "Knoten", "Kobold", "Koch", "Kochen", "Koffer", "Kohlen", "Kojote", "Koks", "Konto", "Konus", "Kopf", "Kopie", "Korb", "Korn", "Korps", "Kosten", "Krabbe", "Kraft", "Kragen", "Kran", "Krater", "Kratz", "Kraut", "Krebs", "Kredit", "Kreis", "Kreuz", "Krieg", "Krippe", "Krise", "Krone", "Krug", "Krume", "Kruste", "Krähe", "Kuchen", "Kugel", "Kuh", "Kultur", "Kumpel", "Kunden", "Kunst", "Kupfer", "Kuppel", "Kurs", "Kurve", "Kuss", "Käfer", "Käfig", "Kälte", "Käse", "König", "Küche", "Küken", "Küste", "Labor", "Lachen", "Lachs", "Ladung", "Lamm", "Lampe", "Land", "Lanze", "Lappen", "Laptop", "Laser", "Last", "Lauf", "Lava", "Leben", "Leber", "Leder", "Leer", "Leere", "Lehrer", "Leiche", "Leiden", "Leine", "Leinen", "Leiste", "Leiter", "Lern", "Lesen", "Leser", "Level", "Licht", "Liebe", "Lied", "Lift", "Liga", "Lilie", "Limit", "Linie", "Link", "Linke", "Linse", "Lippe", "Liste", "Lizenz", "Lkw", "Lob", "Lobby", "Loch", "Locke", "Lodge", "Loft", "Logik", "Logo", "Lokal", "Los", "Luft", "Luke", "Lunge", "Lust", "Luxus", "Länge", "Löwe", "Lücke", "Lüge", "Macher", "Macht", "Madame", "Magie", "Magier", "Mais", "Maler", "Mama", "Man", "Mangel", "Mann", "Mantel", "Marine", "Marke", "Marker", "Markt", "Marmor", "Marsch", "Maske", "Masse", "Match", "Matte", "Mauer", "Maurer", "Maus", "Maß", "Medien", "Meer", "Mehl", "Menge", "Mensch", "Menü", "Messer", "Metall", "Miete", "Milch", "Mine", "Minute", "Mist", "Mitte", "Mix", "Mob", "Mode", "Model", "Modus", "Mohn", "Moment", "Monat", "Mond", "Moos", "Mord", "Morgen", "Motel", "Motiv", "Motor", "Mund", "Museum", "Musik", "Muskel", "Muster", "Mut", "Mutter", "Mythos", "Möbel", "Mönch", "Mücke", "Mühle", "Müll", "Münze", "Nach", "Nacht", "Nadel", "Nagel", "Naht", "Name", "Nap", "Narbe", "Nase", "Nation", "Natur", "Nebel", "Neffe", "Neon", "Nerv", "Nest", "Netz", "Nichte", "Nichts", "Nigger", "Nippel", "Nonne", "Not", "Note", "Notiz", "Oberst", "Objekt", "Obst", "Ohr", "Öl", "Olive", "Oma", "Onkel", "Opa", "Oper", "Opfer", "Option", "Orange", "Ordner", "Orgel", "Ort", "Osten", "Outfit", "Ozean", "Paar", "Pad", "Paket", "Palast", "Palme", "Panik", "Panzer", "Papa", "Papier", "Papst", "Parade", "Park", "Party", "Pass", "Pastor", "Pat", "Patch", "Pause", "Peer", "Penner", "Perle", "Person", "Pest", "Pfad", "Pfanne", "Pfeife", "Pfeil", "Pferd", "Pflege", "Pfote", "Pfund", "Phase", "Physik", "Pier", "Pilger", "Pille", "Pilot", "Pilz", "Pinsel", "Pirat", "Piste", "Pizza", "Plaid", "Plakat", "Plan", "Planet", "Platte", "Platz", "Plus", "Pochen", "Podium", "Poesie", "Poet", "Pokal", "Poker", "Pol", "Pony", "Pop", "Pose", "Post", "Preis", "Presse", "Prinz", "Probe", "Profil", "Puff", "Pull", "Pulver", "Pumpe", "Punkt", "Puppe", "Putz", "Puzzle", "Qual", "Quelle", "Rabbi", "Rabe", "Rache", "Rad", "Radar", "Radio", "Rahmen", "Rakete", "Rampe", "Rand", "Rang", "Rasen", "Rast", "Rat", "Rate", "Ratte", "Rauch", "Raum", "Rebell", "Recht", "Rede", "Reden", "Reed", "Regal", "Regel", "Regen", "Region", "Reh", "Reich", "Reihe", "Reis", "Reise", "Reiß", "Relief", "Rennen", "Renten", "Rezept", "Rinde", "Ring", "Rippe", "Risiko", "Riss", "Ritter", "Ritual", "Robe", "Rock", "Rohr", "Rolle", "Roman", "Rose", "Route", "Rover", "Rubin", "Ruck", "Rudel", "Ruf", "Ruhe", "Ruhm", "Ruine", "Rumpf", "Runde", "Runden", "Russe", "Saat", "Sack", "Saft", "Salat", "Salon", "Salz", "Sand", "Sarg", "Satin", "Sattel", "Satz", "Sauce", "Saum", "Scan", "Schach", "Schaf", "Schal", "Schale", "Schatz", "Schaum", "Schere", "Schiff", "Schild", "Schlaf", "Schlag", "Schnee", "Schnur", "Schock", "Schrei", "Schuh", "Schuld", "Schule", "Schuss", "Schutz", "Schwan", "Schwur", "See", "Seele", "Segel", "Segen", "Seide", "Seife", "Seil", "Sein", "Seite", "Sensor", "Sessel", "Shorts", "Show", "Sicht", "Sieg", "Sieger", "Signal", "Silbe", "Silber", "Sinn", "Sirene", "Sissy", "Skala", "Ski", "Skizze", "Skript", "Slave", "Slip", "Snack", "Socke", "Soda", "Sofa", "Sohn", "Soldat", "Sommer", "Sonne", "Sorge", "Spatz", "Spaß", "Speck", "Speer", "Spiel", "Spieß", "Spinne", "Spion", "Spitze", "Sport", "Spray", "Spritz", "Sprung", "Spur", "Staat", "Stadt", "Stahl", "Stall", "Stamm", "Stand", "Stange", "Stapel", "Star", "Stare", "Start", "Statue", "Status", "Steak", "Stein", "Stereo", "Stern", "Steuer", "Stich", "Stift", "Stil", "Stille", "Stimme", "Stirn", "Stock", "Stolz", "Stoß", "Strafe", "Strahl", "Strand", "Strang", "Streik", "Stress", "Strom", "Studie", "Studio", "Stuhl", "Stumpf", "Stunde", "Sturm", "Stute", "Stück", "Suche", "Suite", "Summe", "Sumpf", "Suppe", "Symbol", "System", "Szene", "Säge", "Säure", "Süden", "Sünde", "Süße", "Tabak", "Tafel", "Tag", "Taille", "Tal", "Talent", "Tan", "Tante", "Tanz", "Tanzen", "Tasche", "Tasse", "Tat", "Taube", "Taxi", "Team", "Tee", "Teich", "Teig", "Teil", "Teilen", "Teller", "Tempel", "Tennis", "Termin", "Test", "Teufel", "Text", "Thema", "Thron", "Ticket", "Tiefe", "Tier", "Tiger", "Til", "Timing", "Tinten", "Tisch", "Titel", "Toast", "Tod", "Tomate", "Ton", "Topf", "Traube", "Trauer", "Traufe", "Traum", "Treue", "Trick", "Trikot", "Trink", "Tritt", "Troll", "Truppe", "Tuch", "Tugend", "Tunika", "Tunnel", "Turm", "Typ", "Töten", "Tür", "Übung", "Umfang", "Umhang", "Umriss", "Unfall", "Union", "Unsinn", "Urlaub", "Urteil", "Vakuum", "Vampir", "Van", "Vase", "Vater", "Vene", "Verlag", "Verrat", "Vers", "Video", "Vieh", "Villa", "Virus", "Vogel", "Volk", "Volks", "Vorort", "Vulkan", "Wachs", "Waffe", "Wagen", "Wahl", "Waise", "Wal", "Wald", "Walze", "Wange", "Wanne", "Wappen", "Warte", "Warten", "Wasser", "Wecker", "Weg", "Weide", "Weinen", "Weise", "Weite", "Weizen", "Weiß", "Welle", "Welpe", "Welt", "Wende", "Wert", "Weste", "Westen", "Wette", "Wetter", "Whisky", "Wiege", "Wiese", "Wille", "Wind", "Windel", "Winkel", "Winter", "Wissen", "Witwe", "Witz", "Woche", "Wodka", "Wohl", "Wolf", "Wolke", "Wolle", "Wort", "Wrack", "Wulst", "Wunde", "Wunder", "Wunsch", "Wurf", "Wurm", "Wurst", "Wut", "Wärme", "Würde", "Würze", "Wüste", "Zahn", "Zapfen", "Zauber", "Zaun", "Zeder", "Zehe", "Zeit", "Zelle", "Zelt", "Zement", "Zeug", "Zeuge", "Ziege", "Ziegel", "Ziel", "Zirkus", "Zone", "Zucker", "Zug", "Zunge", "Zweig", "Zweite", "Zwerg",
    ];

    public function encode($n)
    {
        $len = count(self::$dict);

        $result = [];
        while ($n > 0) {
            array_unshift($result, self::$dict[$n % $len]);
            $n = intdiv($n, $len);
        }
        return join(', ', $result);
    }

    public function decode($w)
    {
        $reverse = array_flip(self::$dict);
        $len = count(self::$dict);

        $words = preg_split('/,\s*/', $w);
        $factor = 1;
        $result = 0;
        while ($words) {
            $word = array_pop($words);
            if (!isset($reverse[$word])) {
                return null;
            }
            $result += $n = $reverse[$word] * $factor;
            $factor *= $len;
        }
        return $result;
    }
}
